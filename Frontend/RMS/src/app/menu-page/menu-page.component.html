<!--@author Jana Barakeh-->
<div class="menu-page">
  <h2>Menu Items</h2>

  <div class="container">
    <div class="row">
      <div class="col-md-4" *ngFor="let item of menuItems">
        <div class="card h-100 mb-4">
        <!--  <img src="..." class="card-img-top" alt="...">-->
          <div class="card-body">
            <h5 class="card-title">{{ item.name }}</h5>
            <p class="card-text">{{ item.description }}</p>
            <p>Price: ${{ item.price }}</p>
            <button class="btn btn-danger" (click)="deleteItem(item.id)">Delete</button>
            <button class="btn btn-warning" (click)="deactivateItem(item.id)" [disabled]="!item.is_available">Deactivate</button>
            <button  class="btn btn-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart4" viewBox="0 0 16 16">
              <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"/>
            </svg></button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
</div>

<!--------------------------------------------------------------->
<div class="container text-center">
  <div class="row">

<!-- add -->
<div class="add-item-form">
  <div class="col">
  <h2>Add New Menu Item</h2>
  <form (ngSubmit)="createNewItem()" #menuItemForm="ngForm">
    <div>
      <label for="name">Name:</label>
      <input 
        type="text" 
        id="name" 
        name="name" 
        [(ngModel)]="newItem.name" 
        required 
        #nameInput="ngModel">
      <div *ngIf="nameInput.invalid && nameInput.touched">
        Name is required.
      </div>
    </div>

    <div>
      <label for="description">Description:</label>
      <textarea 
        id="description" 
        name="description" 
        [(ngModel)]="newItem.description" 
        required 
        #descInput="ngModel"></textarea>
      <div *ngIf="descInput.invalid && descInput.touched">
        Description is required.
      </div>
    </div>

    <div>
      <label for="price">Price:</label>
      <input 
        type="number" 
        id="price" 
        name="price" 
        [(ngModel)]="newItem.price" 
        required 
        #priceInput="ngModel" 
        min="0">
      <div *ngIf="priceInput.invalid && priceInput.touched">
        Price is required and must be a valid number.
      </div>
    </div>

    <div>
      <label for="category">Category:</label>
      <input 
        type="text" 
        id="category" 
        name="category" 
        [(ngModel)]="newItem.category" 
        required 
        #categoryInput="ngModel">
      <div *ngIf="categoryInput.invalid && categoryInput.touched">
        Category is required.
      </div>
    </div>

    <div>
      <label for="is_available">Available:</label>
      <input 
        type="checkbox" 
        id="is_available" 
        name="is_available" 
        [(ngModel)]="newItem.is_available" 
        #isAvailableInput="ngModel">
    </div>

    <button type="submit" [disabled]="menuItemForm.invalid">Add Item</button>
  </form>
</div>
</div>

<!-- update -->
<div class="col">
<div class="update-item-form">
  <h2>Update Menu Item</h2>

  <form (ngSubmit)="UpdateItem(itemId)" #updateItemForm="ngForm">
    
    <!-- Hidden input for the item's ID (optional if selecting from UI) -->
    <input type="hidden" [(ngModel)]="itemId" name="id">
    
    <div>
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" [(ngModel)]="updateItem.name" required>
    </div>

    <div>
      <label for="description">Description:</label>
      <textarea id="description" name="description" [(ngModel)]="updateItem.description" required></textarea>
    </div>

    <div>
      <label for="price">Price:</label>
      <input type="number" id="price" name="price" [(ngModel)]="updateItem.price" required>
    </div>

    <div>
      <label for="category">Category:</label>
      <input type="text" id="category" name="category" [(ngModel)]="updateItem.category" required>
    </div>

    <div>
      <label for="is_available">Available:</label>
      <input 
        type="checkbox" 
        id="is_available" 
        name="is_available" 
        [(ngModel)]="updateItem.is_available" 
        #isAvailableInput="ngModel">
    </div>

    <button type="submit" [disabled]="!updateItemForm.form.valid">Update Item</button>
  </form>
</div>
</div>



  </div>
</div>


